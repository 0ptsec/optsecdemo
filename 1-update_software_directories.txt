#!/bin/bash

echo "$(tput setaf 3)$(tput bold)===============================Running update_software_directories.sh=================================$(tput sgr0)"

sleep 5

echo "$(tput setaf 1)$(tput bold)This script is only to be run after all phiysical hardware has been assembled and the device set to boot from the SSD!"$(tput sgr0)
read -n 1 -s -r -p "$(tput setaf 1)$(tput bold)Press any key to continue or ctrl+c to cancel"$(tput sgr0)

sudo apt update
sudo apt -y full-upgrade
sudo apt install -y rpi-eeprom rpi-eeprom-images apg lshw bro broctl bro-aux i2c-tools python3-pil python3-pip rsync screen tcpdump uhubctl

sudo mkdir -p /opt/bro/logs/ /opt/bro/pcaps/ /opt/bro/passerlogs
cd /opt/bro
sudo ln -sf /etc/bro/ etc

sudo apt list rpi-eeprom rpi-eeprom-images apg lshw bro broctl bro-aux i2c-tools python3-pil python3-pip rsync screen tcpdump uhubctl | sudo tee software_installed.txt
df -h | tee dirs.txt

echo "$(tput setaf 3)$(tput bold)=====================done======================$(tput sgr0)"
read -n 1 -s -r -p "$(tput setaf 3)$(tput bold)Press any key to continue to script 2 or ctrl+c to cancel.$(tput sgr0)"

src = SCRIPT_PATH="./2-configure_bro.sh"
if [ ! -f $src ]
then
       echo "File does not exist!"
else
      echo "=====================Running $src======================="
      
     "$src"

fi